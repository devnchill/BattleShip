(()=>{"use strict";var e={56:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},72:e=>{var n=[];function t(e){for(var t=-1,o=0;o<n.length;o++)if(n[o].identifier===e){t=o;break}return t}function o(e,o){for(var a={},i=[],s=0;s<e.length;s++){var c=e[s],d=o.base?c[0]+o.base:c[0],l=a[d]||0,h="".concat(d," ").concat(l);a[d]=l+1;var u=t(h),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)n[u].references++,n[u].updater(p);else{var m=r(p,o);o.byIndex=s,n.splice(s,0,{identifier:h,updater:m,references:1})}i.push(h)}return i}function r(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,r){var a=o(e=e||[],r=r||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var s=t(a[i]);n[s].references--}for(var c=o(e,r),d=0;d<a.length;d++){var l=t(a[d]);0===n[l].references&&(n[l].updater(),n.splice(l,1))}a=c}}},113:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},314:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",o=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),o&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),o&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,o,r,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(o)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var d=0;d<e.length;d++){var l=[].concat(e[d]);o&&i[l[0]]||(void 0!==a&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=a),t&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=t):l[2]=t),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),n.push(l))}},n}},388:(e,n,t)=>{t.d(n,{A:()=>s});var o=t(601),r=t.n(o),a=t(314),i=t.n(a)()(r());i.push([e.id,"/* 1. Use a more-intuitive box-sizing model */\n*,\n*::before,\n*::after {\n  box-sizing: border-box;\n}\n\n/* 2. Remove default margin */\n*:not(dialog) {\n  margin: 0;\n}\n\nbody {\n  /* 3. Add accessible line-height */\n  line-height: 1.5;\n  /* 4. Improve text rendering */\n  -webkit-font-smoothing: antialiased;\n}\n\n/* 5. Improve media defaults */\nimg,\npicture,\nvideo,\ncanvas,\nsvg {\n  display: block;\n  max-width: 100%;\n}\n\n/* 6. Inherit fonts for form controls */\ninput,\nbutton,\ntextarea,\nselect {\n  font: inherit;\n}\n\n/* 7. Avoid text overflows */\np,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  overflow-wrap: break-word;\n}\n\n/* 8. Improve line wrapping */\np {\n  text-wrap: pretty;\n}\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  text-wrap: balance;\n}\n\n/*\n  9. Create a root stacking context\n*/\n#root,\n#__next {\n  isolation: isolate;\n}\n",""]);const s=i},540:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var n={};e.exports=function(e,t){var o=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},805:(e,n,t)=>{t.d(n,{A:()=>d});var o=t(601),r=t.n(o),a=t(314),i=t.n(a),s=t(388),c=i()(r());c.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap);"]),c.i(s.A),c.push([e.id,'* {\n  font-family:\n    "Roboto", "Lucida Sans", "Lucida Sans Regular", "Lucida Grande",\n    "Lucida Sans Unicode", Geneva, Verdana, sans-serif;\n  i {\n    color: white;\n  }\n}\n\nhtml,\nbody {\n  height: 100%;\n  width: 100%;\n  background-color: black;\n  color: white;\n}\n\nbody {\n  display: grid;\n  grid-template-areas:\n    "header"\n    "main"\n    "footer";\n  grid-template-rows: auto 1fr 5%;\n\n  dialog {\n    border: 2px solid white;\n    border-radius: 1rem;\n    background-color: black;\n    color: white;\n    & > form {\n      div > * {\n        display: block;\n        margin: 1rem;\n      }\n      & > button {\n        min-width: 100%;\n      }\n    }\n  }\n  .color-guide {\n    list-style: none;\n    padding-left: 0;\n  }\n\n  .color-box {\n    display: inline-block;\n    width: 1em;\n    height: 1em;\n    margin-right: 0.5em;\n    vertical-align: middle;\n    border: 1px solid #000;\n    border-radius: 3px;\n  }\n\n  .color-box.green {\n    background-color: green;\n  }\n  .color-box.blue {\n    background-color: blue;\n  }\n  .color-box.red {\n    background-color: red;\n  }\n  .color-box.grey {\n    background-color: grey;\n  }\n\n  .flex {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .big-and-bold {\n    font-size: 1.5rem;\n    font-weight: bolder;\n  }\n\n  header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 2rem;\n\n    & > .title {\n      flex: 1;\n      text-align: center;\n    }\n\n    & > .icons {\n      display: flex;\n      gap: 3rem;\n    }\n  }\n\n  & > main {\n    display: flex;\n    justify-content: space-around;\n    gap: 2rem;\n    flex-wrap: wrap;\n    padding: 2rem;\n\n    & > .board-wrapper {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n\n      & > .player-label {\n        font-weight: bold;\n        margin-top: 1rem;\n        font-size: 1.2rem;\n      }\n\n      & > .gameboard {\n        display: flex;\n        flex-direction: column;\n        width: 500px;\n        height: 500px;\n\n        & > .grid-row {\n          display: flex;\n          justify-content: space-between;\n          width: 100%;\n          height: 10%;\n\n          & > .grid-cell {\n            cursor: pointer;\n            width: 10%;\n            height: 100%;\n            border: 2px solid white;\n          }\n        }\n      }\n    }\n\n    .grid-cell.hit {\n      background-color: green;\n    }\n\n    .grid-cell.miss {\n      background-color: red;\n    }\n\n    .grid-cell.untouched {\n      background-color: grey;\n    }\n\n    .human-board .grid-cell.ship:not(.hit):not(.miss) {\n      background-color: blue;\n    }\n\n    .ai-board .grid-cell.ship:not(.hit):not(.miss) {\n      background-color: grey;\n    }\n  }\n\n  & > footer {\n    grid-area: footer;\n    gap: 1rem;\n  }\n}\n',""]);const d=c},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,r&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),n.styleTagTransform(o,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}}},n={};function t(o){var r=n[o];if(void 0!==r)return r.exports;var a=n[o]={id:o,exports:{}};return e[o](a,a.exports,t),a.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&"SCRIPT"===n.currentScript.tagName.toUpperCase()&&(e=n.currentScript.src),!e)){var o=n.getElementsByTagName("script");if(o.length)for(var r=o.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=o[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.nc=void 0;var o=t(72),r=t.n(o),a=t(825),i=t.n(a),s=t(659),c=t.n(s),d=t(56),l=t.n(d),h=t(540),u=t.n(h),p=t(113),m=t.n(p),f=t(805),g={};g.styleTagTransform=m(),g.setAttributes=l(),g.insert=c().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=u(),r()(f.A,g),f.A&&f.A.locals&&f.A.locals;let b=function(e){return e[e.UNTOUCHED=0]="UNTOUCHED",e[e.MISS=1]="MISS",e[e.HIT=2]="HIT",e}({});var y=function(e){return e.VERTICAL="VERTICAL",e.HORIZONTAL="HORIZONTAL",e}(y||{});const w=y;function v(){return[Math.floor(10*Math.random()),Math.floor(10*Math.random())]}function x(e){const[n,t]=e;return n>=0&&n<10&&t>=0&&t<10}class S{allShips=[];constructor(){this._board=Array.from({length:10},(()=>Array.from({length:10},(()=>({state:b.UNTOUCHED,hasShip:!1})))))}placeShip(e,n){const t=e.orientation,o=e.length,r=[];for(const e of function(e,n,t){const[o,r]=e,a=[];for(let e=0;e<n;e++)a.push(t===w.HORIZONTAL?[o,r+e]:[o+e,r]);return a}(n,o,t)){if(!x(e)||this._board[e[0]][e[1]].hasShip)return!1;r.push(e)}for(const n of r)this._board[n[0]][n[1]].hasShip=!0,this._board[n[0]][n[1]].ship=e;return this.allShips.push(e),!0}receiveAttach(e){const[n,t]=e;this._board[n][t].hasShip?(this._board[n][t].state=b.HIT,this._board[n][t].ship?.hit()):this._board[n][t].state=b.MISS}areAllShipsSunk(){return this.allShips.every((e=>e.isSunk()))}get board(){return this._board}resetLogicalBoard(){this._board.forEach((e=>{e.forEach((e=>{e.hasShip=!1,e.ship=void 0,e.state=b.UNTOUCHED}))}))}}class L{constructor(e){this.gameBoard=new S,this.name=e}}class A extends L{}class I extends L{constructor(){super("AI")}}const B=t.p+"4bb7caf3043a7814ba09.mp3";var E=function(e){return e.HUMAN="human",e.AI="ai",e}(E||{});const C=E,k=class{constructor(e){this.playerType=e,this.board=document.createElement("div"),this.board.classList.add("domboard")}createBoard(){for(let e=0;e<10;e++){const n=document.createElement("div");n.classList.add("grid-row");for(let t=0;t<10;t++){const o=document.createElement("div");o.classList.add("grid-cell"),o.dataset.row=e.toString(),o.dataset.column=t.toString(),n.appendChild(o)}this.board.appendChild(n)}return this.board.classList.add("gameboard"),this.playerType==C.HUMAN?(this.board.classList.add("human-board"),this.board.style.pointerEvents="none"):this.board.classList.add("ai-board"),this.board}syncBoard(e){for(let n=0;n<10;n++)for(let t=0;t<10;t++){const o=this.board.querySelector(`.grid-cell[data-row="${n}"][data-column="${t}"]`);if(!o)throw new Error(`Cell at row:${n} col:${t} not found`);o.classList.remove("ship","hit","miss","untouched");const r=e[n][t];r.hasShip&&o.classList.add("ship"),r.state===b.HIT&&o.classList.add("hit"),r.state===b.UNTOUCHED&&o.classList.add("untouched"),r.state===b.MISS&&o.classList.add("miss")}}resetDomBoard(){for(let e=0;e<10;e++)for(let n=0;n<10;n++){const t=this.board.querySelector(`.grid-cell[data-row="${e}"][data-column="${n}"]`);if(!t)throw new Error(`Cell at row:${e} column:${n} not found`);t.classList.remove("ship","hit","miss"),t.classList.add("untouched")}}};class T{static MAIN=document.querySelector("main");constructor(){this.speakerIcon=document.querySelector(".music-toggle-icon"),this.audio=new Audio(B),this.audio.loop=!0,this.humanDomBoard=new k(C.HUMAN),this.aiDomBoard=new k(C.AI),this.attachMusicToggle(),this.placeHumanBoard(),this.placeAiBoard(),this.restartGame(),this.attachHelpListener()}async getName(){const e=document.querySelector("dialog");return new Promise((n=>{e?.addEventListener("close",(()=>{const e=document.getElementById("name-input");n(e?.value.trim()),document.querySelector("form")?.reset()}),{once:!0}),e?.showModal()}))}setName(e){const n=document.querySelector(".human-label");if(!n)throw new Error("Human Label not found in setName in DomController");n.textContent=`${e} (You)`}toggleMusic(){this.audio&&this.speakerIcon&&(this.audio.paused?(this.audio.play(),this.speakerIcon.classList.remove("fa-volume-xmark"),this.speakerIcon.classList.add("fa-volume-high")):(this.audio.pause(),this.speakerIcon.classList.remove("fa-volume-high"),this.speakerIcon.classList.add("fa-volume-xmark")))}attachMusicToggle(){if(!this.speakerIcon)throw new Error("speakerIcon not found");this.speakerIcon?.addEventListener("click",(()=>this.toggleMusic()))}placeHumanBoard(){if(!T.MAIN)throw new Error("Main Not Found");const e=document.createElement("div");e.classList.add("board-wrapper");const n=document.createElement("p");n.classList.add("player-label"),n.classList.add("human-label"),n.textContent="Captain (You)",e.appendChild(this.humanDomBoard.createBoard()),e.appendChild(n),T.MAIN.appendChild(e),this.humanDomBoard.resetDomBoard()}placeAiBoard(){if(!T.MAIN)throw new Error("Main Not Found");const e=document.createElement("div");e.classList.add("board-wrapper");const n=document.createElement("p");n.classList.add("player-label"),n.textContent="Enemy AI",e.appendChild(this.aiDomBoard.createBoard()),e.appendChild(n),T.MAIN.appendChild(e),this.aiDomBoard.resetDomBoard()}getClickedCoordinates(e){return new Promise((n=>{e.addEventListener("click",(e=>{const t=e.target;if(!t.classList.contains("grid-cell"))return;const o=t.dataset.row,r=t.dataset.column;if(!o||!r)return;const a=parseInt(o),i=parseInt(r);console.log("Clicked DOM Cell:",{x:a,y:i}),console.log("Target Element:",t),n([a,i])}))}))}syncBoards(e,n){this.humanDomBoard.syncBoard(e),this.aiDomBoard.syncBoard(n)}syncHumanBoard(e){this.humanDomBoard.syncBoard(e)}syncAiBoard(e){this.aiDomBoard.syncBoard(e)}declareWinner(e,n){const t=document.getElementById("winner-dialog"),o=document.getElementById("winner-text");if(!o)throw new Error("Winner text not found when looking to display winner in declareWinner method of DomController");e===C.HUMAN?o.textContent=`🏆 Captain ${n}, You Won`:o.textContent="💥 AI Conquered the Seas Try Again.",t.showModal()}restartGame(){const e=document.getElementById("play-again");e?.addEventListener("click",(()=>window.location.reload()))}showHelpMenu(){const e=document.getElementById("help-dialog"),n=document.getElementById("close-help");if(!e||!n)throw new Error("Help dialog or close button not found");e.showModal(),n.addEventListener("click",(()=>{e.close()}),{once:!0})}attachHelpListener(){const e=document.querySelector(".help-icon");e?.addEventListener("click",(()=>this.showHelpMenu()))}}const H=T;class M{constructor(e){this._length=e,this.noOfHits=0,this._orientation=w.HORIZONTAL}hit(){this.noOfHits++}isSunk(){return this._length<=this.noOfHits}get totalHits(){return this.noOfHits}get length(){return this._length}get orientation(){return this._orientation}set orientation(e){this._orientation=e}toggleOrientation(){this._orientation=this._orientation===w.HORIZONTAL?w.VERTICAL:w.HORIZONTAL}}class N extends M{constructor(){super(2)}}class O extends M{constructor(){super(3)}}class D extends M{constructor(){super(4)}}class _ extends M{constructor(){super(5)}}class R extends M{constructor(){super(3)}}class U{static getFreshShips(){return[new R,new _,new D,new N,new O]}isGameOver=!1;constructor(){this.dom=new H}async start(){this.playerName=await this.dom.getName(),this.dom.setName(this.playerName),this.human=new A(this.playerName),this.ai=new I,this.currentPlayer=this.human,this.deployShips(),await this.gameLoop()}deployShips(){this.deployAiShips(),this.deployHumanShips()}deployHumanShips(){this.human.gameBoard.resetLogicalBoard();for(const e of U.getFreshShips()){e.orientation=Math.random()<.5?w.HORIZONTAL:w.VERTICAL;let n=!1;for(;!n;)n=this.human.gameBoard.placeShip(e,v())}this.dom.syncHumanBoard(this.human.gameBoard.board)}deployAiShips(){this.ai.gameBoard.resetLogicalBoard();for(const e of U.getFreshShips()){e.orientation=Math.random()<.5?w.HORIZONTAL:w.VERTICAL;let n=!1;for(;!n;)n=this.ai.gameBoard.placeShip(e,v())}this.dom.syncAiBoard(this.ai.gameBoard.board)}switchTurns(){this.currentPlayer=this.currentPlayer===this.human?this.ai:this.human}async gameLoop(){if(!document.querySelector(".human-board"))throw new Error("Human Board not found in gameLoop");const e=document.querySelector(".ai-board");if(!e)throw new Error("ai Board not found in gameLoop");for(;!this.isGameOver;){if(this.currentPlayer==this.human){const n=await this.dom.getClickedCoordinates(e);this.ai.gameBoard.receiveAttach(n),this.ai.gameBoard.areAllShipsSunk()&&this.quitGame(C.HUMAN)}else this.human.gameBoard.receiveAttach(v()),this.human.gameBoard.areAllShipsSunk()&&this.quitGame(C.AI);this.dom.syncBoards(this.human.gameBoard.board,this.ai.gameBoard.board),this.switchTurns()}}quitGame(e){console.log(e+"wins"),this.dom.declareWinner(e,this.playerName),this.isGameOver=!0}}const q=U;window.addEventListener("DOMContentLoaded",(()=>{(new q).start()}))})();